import{r as e,w as t,c as o,D as l,o as n,a,b as s,d as i,e as r,v as c,u as d,n as u,f as p,g,F as y,J as f,p as h,h as m,i as b,t as w,j as v,k,M as S,l as C,m as x,q as I,s as A,x as E,y as j,z as D,A as P,B as O,C as L,E as T,G as $,H as B}from"./vendor.254edb8d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var R={log:console.log.bind(console,"[DEBUG]")};const U=JSON.parse(localStorage.getItem("s3console")||"{}"),F=e(Object.assign({region:null,delimiter:"/",currentBucket:null,rememberedBuckets:[],currentDirectory:null,awsAccountId:null,cognitoPoolId:null,applicationClientId:null,applicationLoginUrl:null,identityPoolId:null,userRoleId:null,objects:[],loggedOut:!1,autoLoginIn:!1,sharedSettings:{}},U,{initialized:!1,globalLoader:!0,loggedOut:!1,showBucketSelector:!1,showSettings:!1,showAddFolder:!1,showTrash:!1,showUploads:!1,deletedObjects:{}}));t(F,(()=>{localStorage.setItem("s3console",JSON.stringify(F)),AWS.config.update({region:F.region})}));const _=o((()=>F.currentBucket));function M(){var e;return F.rememberedBuckets.concat((null==(e=F.sharedSettings)?void 0:e.buckets)||[]).map((e=>"object"==typeof e?e:{bucket:e})).sort(((e,t)=>e.bucket.localeCompare(t.bucket)))}t(_,(()=>{F.deletedObjects={}}));var N=new class{decode(e){try{return e&&JSON.parse(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const o=t.length%4;if(o){if(1===o)throw new Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");t+=new Array(5-o).join("=")}return atob(t)}(e.split(".")[1]))}catch(t){return null}}};const z=e=>crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e)),W=async()=>{const e=await z(crypto.getRandomValues(new Uint32Array(4)).toString());return Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")};async function K(e){const t=new URL(window.location).searchParams;if(F.initialized=!0,F.tokens&&l.fromSeconds(N.decode(F.tokens.access_token).exp)>l.utc())return F.autoLoginIn=!0,R.log("Found login token skipping login"),await G(),void(F.showSettings=!1);F.tokens=null;const o=t.get("code");if(null!==o){const e=new URL(window.location);e.searchParams.delete("nonce"),e.searchParams.delete("expires_in"),e.searchParams.delete("access_token"),e.searchParams.delete("id_token"),e.searchParams.delete("state"),e.searchParams.delete("code"),e.searchParams.delete("iss"),window.history.replaceState({},void 0,e.toString());const t=localStorage.getItem("codeVerifier");if(null===t)throw new Error("Unexpected code");const l=Object.entries({grant_type:"authorization_code",client_id:F.applicationClientId,code:o,code_verifier:t,redirect_uri:`${window.location.origin}${window.location.pathname}`}).map((([e,t])=>`${e}=${t}`)).join("&"),n=await fetch(`${F.applicationLoginUrl}/oauth2/token`,{method:"POST",headers:new Headers({"content-type":"application/x-www-form-urlencoded"}),body:l});if(!n.ok)throw new Error(await n.json());const a=await n.json();return F.tokens=a,await G(),F.showSettings=!1,void(F.autoLoginIn=!0)}if(R.log("Validating login parameters"),!(await q()||F.awsAccountId&&F.applicationLoginUrl&&F.applicationClientId&&F.identityPoolId))return R.log("Missing required parameter for login",F.awsAccountId,F.applicationLoginUrl,F.applicationClientId,F.identityPoolId),void(F.showSettings=!0);try{new URL(F.applicationLoginUrl)}catch(d){return void R.log("Invalid application login url:",F.applicationLoginUrl)}if(!e&&!F.autoLoginIn)return;F.autoLoginIn=!1;const n=await W(),a=await W();localStorage.setItem("codeVerifier",a);const s=(i=await z(a),btoa(String.fromCharCode.apply(null,new Uint8Array(i))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""));var i;const r=`${window.location.origin}${window.location.pathname}`;F.loggedOut=!1,window.location=`${F.applicationLoginUrl}/oauth2/authorize?response_type=code&client_id=${F.applicationClientId}&state=${n}&code_challenge_method=S256&code_challenge=${s}&redirect_uri=${r}`;const c=new Promise((e=>setTimeout(e,2e3)));await G(),await c}const V=o((()=>F.awsAccountId));async function q(){var e;if("localhost"!==window.location.hostname&&"console.rhosys.ch"!==window.location.hostname)try{const t=await fetch(new URL("/configuration.json",window.location.href).toString()),o=await t.json();return R.log("Setting configuration from custom domain."),F.applicationClientId=o.applicationClientId,F.identityPoolId=o.identityPoolId,F.cognitoPoolId=o.cognitoPoolId,F.region=F.identityPoolId.split(":")[0],F.applicationLoginUrl=(null==(e=o.applicationLoginUrl)?void 0:e.match(/^https:/))?o.applicationLoginUrl:`https://${o.applicationLoginUrl}.auth.${F.region}.amazoncognito.com`,F.autoLoginIn=!0,!0}catch(t){return R.log("Failed setting configuration for custom domain: ",t),!1}return!1}async function H(e){var t;if(R.log(`AccountID changed, updating configuration: ${e}`),!e)return F.applicationClientId=null,F.applicationLoginUrl=null,void(F.userRoleId=null);if(await q())return;let o;if(e){if(!o){const t=["eu-west-1","us-east-1"];o=(await Promise.all(t.map((async t=>{try{const o=await fetch(`https://s3.${t}.amazonaws.com/s3-explorer.${e}${t?".":""}${t||""}/configuration.json`);return await o.json()}catch(o){return null}})))).find((e=>e))}if(!o){const t=["eu-north-1","ap-south-1","eu-west-3","eu-west-2","ap-northeast-3","ap-northeast-2","ap-northeast-1","sa-east-1","ca-central-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-2","us-west-1","us-west-2"];o=(await Promise.all(t.map((async t=>{try{const o=await fetch(`https://s3.${t}.amazonaws.com/s3-explorer.${e}${t?".":""}${t||""}/configuration.json`);return await o.json()}catch(o){return null}})))).find((e=>e))}if(!o)try{const t=await fetch(`https://s3.eu-west-1.amazonaws.com/s3-explorer.${e}/configuration.json`);o=await t.json()}catch(l){return void R.log("Failed to load configuration:",l)}}o&&(R.log("Configuration for account fetched:",o),F.applicationClientId=o.applicationClientId,F.identityPoolId=o.identityPoolId,F.cognitoPoolId=o.cognitoPoolId,F.region=F.identityPoolId.split(":")[0],F.applicationLoginUrl=(null==(t=o.applicationLoginUrl)?void 0:t.match(/^https:/))?o.applicationLoginUrl:`https://${o.applicationLoginUrl}.auth.${F.region}.amazoncognito.com`)}function G(){if(F.identityPoolId&&F.tokens)try{const e=N.decode(F.tokens.id_token).iss.split("/").slice(-1)[0];AWS.config.region=F.region,AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:F.identityPoolId,Logins:{[`cognito-idp.${AWS.config.region}.amazonaws.com/${e}`]:F.tokens.id_token}}),R.log("Checking credentials"),AWS.config.credentials.get((async e=>{if(e)R.log("Failed to get credentials, following requests will not work due to the error:",e);else try{const e=await new AWS.STS({region:F.region}).getCallerIdentity().promise();R.log("AWS Credentials Set",e),F.userRoleId=e.Arn.split("/")[1],F.autoLoginIn=!0}catch(t){R.log("Failed to get credentials, following requests will not work due to the error:",t),F.awsAccountId=null,F.applicationClientId=null}}))}catch(e){R.log("Failed to set credentials, following requests will not work due to the error:",e)}}t(V,(e=>{H(e)}));const Y={class:"modal-dialog"},J={class:"modal-content"},Q=s("div",{class:"modal-header"},[s("h4",{class:"modal-title"},"S3 Explorer: Settings")],-1),Z={class:"modal-body"},X={class:"col-md-18"},ee=s("h2",null,"Welcome to the AWS S3 Explorer",-1),te={class:"",style:{width:"100%"}},oe=s("div",null," To log in specify the following configuration: ",-1),le=s("br",null,null,-1),ne={style:{display:"flex","align-items":"center"}},ae=s("span",{style:{"flex-grow":"1","flex-shrink":"0","margin-right":"0.5rem"}},"AWS AccountId: ",-1),se=s("br",null,null,-1),ie=["disabled"],re=[s("i",{class:"fas fa-sign-in-alt"},null,-1),p(" Login")],ce=s("hr",null,null,-1),de=s("h4",null,"One time AWS Cloud Formation setup",-1),ue=p(" The S3 Explorer provides a quick setup step using a CFN template. Follow the steps to configure your account, and only need to be run once per AWS account. "),pe=s("br",null,null,-1),ge={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ye=s("span",null,[p("Launch the CFN template:"),s("br"),s("small",null,"(you'll be able to review on the next screen)"),s("br")],-1),fe=["href","target"],he=[s("img",{src:"https://s3.amazonaws.com/cloudformation-examples/cloudformation-launch-stack.png"},null,-1)],me=s("br",null,null,-1),be=p(" Wait for the app to be completely deployed and then enter your AWS Account ID: "),we=s("hr",null,null,-1),ve=s("h4",null,"[Optional] Connecting an SSO provider to Cognito:",-1),ke=p(" Follow your provider's guide to create a new client."),Se=s("br",null,null,-1),Ce=p("Set the "),xe=s("strong",null,"Redirect URI",-1),Ie=p(" property set it to be:"),Ae=s("br",null,null,-1),Ee={class:"input-group"},je=["value"],De={class:"input-group-btn"},Pe=["disabled"],Oe={key:0},Le=[s("i",{class:"fas fa-copy"},null,-1),p(" Copy")],Te={key:1},$e=[s("i",{class:"fas fa-check"},null,-1),p(" Copy")],Be=s("br",null,null,-1),Re=p(" Navigate to the newly created Cognito Pool and configure: "),Ue=["href"],Fe=s("br",null,null,-1),_e=p("Select your SSO identity provider and fill in the credentials. "),Me=["href"],Ne=s("br",null,null,-1),ze=p("Select the new identity provider, that you just linked (then click "),We=s("strong",null,"Save changes",-1),Ke=p(") "),Ve={setup(t){const l=e({region:null,copyButtonSuccess:!1}),p="eu-west-1",y=o((()=>`https://${F.region}.console.aws.amazon.com/cognito/v2/idp/user-pools/${F.cognitoPoolId}`)),f=o((()=>"https://eu-west-1.console.aws.amazon.com/lambda/home?region=eu-west-1#/create/app?applicationId=arn:aws:serverlessrepo:eu-west-1:922723803004:applications/S3-Explorer")),h=()=>{g(`https://${F.awsAccountId}-s3explorer.auth.${F.region||p}.amazoncognito.com/oauth2/idpresponse`,void 0,(()=>{l.copyButtonSuccess=!0,H(F.awsAccountId)}))};return(e,t)=>(n(),a("div",null,[s("div",Y,[s("div",J,[s("form",{onSubmit:t[2]||(t[2]=i((e=>(async()=>{await H(F.awsAccountId),await K(!0)})()),["prevent"]))},[s("div",null,[Q,s("div",Z,[s("div",X,[ee,s("div",te,[oe,le,s("div",ne,[ae,se,r(s("input",{name:"AWS AccountId","onUpdate:modelValue":t[0]||(t[0]=e=>d(F).awsAccountId=e),type:"text",class:"form-control",placeholder:"742482629247",required:"true",style:{"flex-grow":"1","margin-right":"0.5rem"}},null,512),[[c,d(F).awsAccountId,void 0,{trim:!0}]]),s("button",{style:{"flex-grow":"1","margin-right":"0.5rem"},type:"submit",class:"btn btn-primary",disabled:!d(F).awsAccountId},re,8,ie)]),ce,s("div",null,[de,ue,s("ol",null,[pe,s("li",null,[s("div",ge,[ye,s("a",{href:d(f)||"#",target:d(f)?"_blank":"_self",class:u({disabled:!d(f)})},he,10,fe)])]),me,s("li",null,[be,s("div",null,[r(s("input",{name:"AWS AccountId","onUpdate:modelValue":t[1]||(t[1]=e=>d(F).awsAccountId=e),type:"text",class:"form-control",placeholder:"742482629247",required:"true",style:{"flex-grow":"1","margin-right":"0.5rem",width:"200px"},maxlength:"20"},null,512),[[c,d(F).awsAccountId,void 0,{trim:!0}]])])])]),we,ve,s("ol",null,[s("li",null,[ke,Se,Ce,xe,Ie,Ae,s("div",Ee,[s("input",{name:"AWS AccountId",value:`https://${d(F).awsAccountId||""}-s3explorer.auth.${d(F).region}.amazoncognito.com/oauth2/idpresponse`,type:"text",class:"form-control",placeholder:"742482629247",required:"true",style:{"flex-grow":"1"},disabled:!0},null,8,je),s("span",De,[s("button",{style:{"flex-grow":"1"},class:"btn btn-primary",type:"button",disabled:!d(F).awsAccountId,onClick:h},[d(l).copyButtonSuccess?(n(),a("span",Te,$e)):(n(),a("span",Oe,Le))],8,Pe)])])]),Be,s("li",null,[Re,s("ul",null,[s("li",null,[s("a",{href:`${d(y)}/sign-in/identity-providers/add`,target:"_blank"}," Sign-in experience > Federated identity provider sign-in",8,Ue),Fe,_e]),s("li",null,[s("a",{href:`${d(y)}/app-integration/clients/${d(F).applicationClientId}/edit/hosted-ui-settings`,target:"_blank"}," App integration > Identity providers",8,Me),Ne,ze,We,Ke])])])])])])])])])],32)])])]))}},qe=o({get:()=>F.currentBucket});async function He(){try{F.objects=await Ge(F.currentDirectory),F.objects.length||(await new Promise((e=>setTimeout(e,1e3))),F.objects=await Ge(F.currentDirectory))}catch(e){try{return await new Promise((e=>setTimeout(e,1e3))),void(F.objects=await Ge(F.currentDirectory))}catch(t){throw e}}}async function Ge(e,t=!1){if(!F.currentBucket)return[];const o=new AWS.S3({maxRetries:0,region:F.region}),n={Bucket:F.currentBucket.trim().toLowerCase(),Delimiter:t?void 0:F.delimiter,Prefix:e?e!==F.delimiter?`${e}/`:e:void 0,RequestPayer:"requester"};let a;for(;n.ContinuationToken||!a;){const e=await o.listObjectsV2(n).promise();a=(a||[]).concat(e.CommonPrefixes.map((e=>({key:e.Prefix.slice(0,-1)||F.delimiter,type:"DIRECTORY"})))).concat(e.Contents.map((e=>({key:e.Key,lastModified:l.fromJSDate(new Date(e.LastModified)).toFormat("DD TTT"),size:e.Size,storageClass:e.StorageClass,type:"PATH"})))),n.ContinuationToken=e.NextContinuationToken}return a}t(qe,(async()=>{try{await He()}catch(e){F.objects=[]}}));h("data-v-183a18de");const Ye={class:"modal-dialog"},Je={class:"modal-content"},Qe={name:"settings_form"},Ze=s("div",{class:"modal-header"},[s("h4",{class:"modal-title"},"Select an S3 Bucket")],-1),Xe={class:"modal-body"},et={class:"col-md-18"},tt=p("Current Bucket: "),ot=s("br",null,null,-1),lt=s("h4",null,"Select a bucket or specify a new one:",-1),nt=s("small",null,"Enter a bucket",-1),at=p("Search for bucket"),st=s("br",null,null,-1),it={key:0},rt=[s("ul",{class:"nav nav-tabs","data-tabs":"tabs"},[s("li",{role:"presentation",class:"active"},[s("a",{href:"#cors","data-toggle":"tab"},"Listing Bucket Information")])],-1),s("div",{id:"my-tab-content",class:"tab-content"},[s("div",{class:"tab-pane active",id:"cors"},[s("p",null,"AWS S3 Service prevents the direct look up of buckets that a user or role has access to through the browser. Therefore they must be entered here. If the list of available buckets frequently changes and needs to be dynamically rendered it can be loaded at runtime using a configurable bucket list."),s("p",null,[p("This functionality is currently under development, for additional information please create a "),s("a",{href:"https://github.com/Rhosys/aws-s3-explorer/issues",target:"_blank"},"GitHub Issue"),p(".")])])],-1)],ct={key:1},dt=s("ul",{class:"nav nav-tabs","data-tabs":"tabs"},[s("li",{role:"presentation",class:"active"},[s("a",{href:"#cors","data-toggle":"tab"},"CORS")])],-1),ut={id:"my-tab-content",class:"tab-content"},pt={class:"tab-pane active",id:"cors"},gt=s("p",null,"The browser cannot display the contents of this Amazon S3 bucket because it is missing proper cross-origin resource sharing (CORS) configuration.",-1),yt=s("p",null,"To configure CORS, you create a CORS configuration that identifies the origins allowed to access your bucket and the operations (HTTP methods) supported.",-1),ft=s("p",null,"To do this, go to the Amazon S3 Console, select your bucket in the buckets panel, and click to reveal Permissions in the Properties pane. Click Edit CORS Configuration. The CORS Configuration Editor panel will open up with a field where you can enter a CORS Configuration. Enter a configuration similar to the following:",-1),ht={key:2},mt=s("ul",{class:"nav nav-tabs","data-tabs":"tabs"},[s("li",{role:"presentation",class:"active"},[s("a",{href:"#cors","data-toggle":"tab"},"Access Denied")])],-1),bt={id:"my-tab-content",class:"tab-content"},wt={class:"tab-pane active",id:"cors"},vt=s("p",null,"The role you are using is not configured to allow access to this bucket.",-1),kt=p("To configure permissions, update the IAM role ("),St=p(") created as part of the S3 Explorer setup. The dedicated role should grant permissions similar the following:"),Ct={class:"modal-footer"},xt={class:"form-group"},It={class:"col-sm-offset-2 col-sm-10"};m();const At={setup(t){var o;const l=e({showCorsError:null,suggestedCorsConfiguration:[{AllowedHeaders:["*"],AllowedMethods:["PUT","POST","DELETE","HEAD","GET"],AllowedOrigins:[null!=(o=window.location.origin)?o:"https://console.rhosys.ch"],ExposeHeaders:["x-amz-server-side-encryption","x-amz-request-id","x-amz-id-2"],MaxAgeSeconds:3e3}],suggestedBucketPolicy:{Version:"2012-10-17",Statement:[{Effect:"Allow",Action:["s3:*"],Resource:["*"]}]}}),i=async(e,t)=>{l.showError=null;try{await async function(e){const t=new AWS.S3({maxRetries:0});try{await t.getBucketCors({Bucket:e}).promise()}catch(o){try{return void(await Ge())}catch(l){}if(o&&"NetworkingError"===o.code)throw Error("CORS");if(o&&"AccessDenied"===o.code)throw Error("PERMISSIONS");throw o}}(e)}catch(o){if("CORS"===o.message)return void(l.showError="CORS");if("PERMISSIONS"===o.message)return void(l.showError="PERMISSIONS");R.log("Failed to look up information about the bucket",o)}t||(F.showBucketSelector=!1)},r=e=>{const t=e&&e.trim().toLowerCase();M().some((e=>e.bucket===t))||F.rememberedBuckets.push({bucket:t}),F.currentBucket=t,i(t)},c=async()=>{await i(F.currentBucket)};return b((async()=>{F.currentBucket&&await i(F.currentBucket,!0),M().length||(l.showError="FETCH_ALL_BUCKETS")})),(e,t)=>(n(),a("div",null,[s("div",Ye,[s("div",Je,[s("form",Qe,[s("div",null,[Ze,s("div",Xe,[s("div",et,[s("h4",null,[tt,s("strong",null,w(d(F).currentBucket),1)]),ot,lt,v(d(S),{modelValue:d(F).currentBucket,"onUpdate:modelValue":t[0]||(t[0]=e=>d(F).currentBucket=e),modelModifiers:{trim:!0},options:d(M)().map((e=>e.bucket)),placeholder:"Select a bucket or enter a new one",showLabels:!1,allowEmpty:!1,taggable:!0,"open-direction":"bottom",hideSelected:!0,closeOnSelect:!0,selectLabel:"(press enter to select)","tag-placeholder":"(press enter to select)",onTag:r,onSelect:i},{noOptions:k((()=>[nt])),placeholder:k((()=>[at])),_:1},8,["modelValue","options"]),st,"FETCH_ALL_BUCKETS"===d(l).showError?(n(),a("div",it,rt)):C("",!0),"CORS"===d(l).showError?(n(),a("div",ct,[dt,s("div",ut,[s("div",pt,[gt,yt,ft,s("p",null,[s("pre",null,w(JSON.stringify(d(l).suggestedCorsConfiguration,null,2)),1)])])])])):"PERMISSIONS"===d(l).showError?(n(),a("div",ht,[mt,s("div",bt,[s("div",wt,[vt,s("p",null,[kt,s("strong",null,w(d(F).userRoleId),1),St]),s("p",null,[s("pre",null,w(JSON.stringify(d(l).suggestedBucketPolicy,null,2)),1)])])])])):C("",!0)])]),s("div",Ct,[s("div",xt,[s("div",It,[d(l).showError?(n(),a("button",{key:0,type:"button",class:"btn btn-warning",onClick:c},"Refresh")):C("",!0),s("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=e=>d(F).showBucketSelector=!1)},"Close")])])])])])])])]))}};function Et(e){if(!e)return"";if(0===e)return"0 Bytes";const t=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return`${Math.round(e/1024**t,2)} ${["Bytes","KB","MB","GB","TB"][t]}`}function jt(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#x2F;").replace(/`/g,"&#x60;").replace(/=/g,"&#x3D;")}function Dt(e,t=!1){const o=e.replace(/^.*[\\/]/,"");return t?jt(o):o}At.__scopeId="data-v-183a18de";const Pt=String.fromCharCode(8230);function Ot(e,t=!1){if(e.length<80)return t?jt(e):e;const o=`${function(e,t=!1){const o=e.split("/");o.splice(o.length-2,1);const l=o.join("/");return t?jt(l):l}(function(e,t=!1){const o=e.lastIndexOf("/"),l=-1===o?"/":e.substring(0,o+1);return t?jt(l):l}(e))+Pt}/${Dt(e)}`;if(o.length<80&&o.length>2)return t?jt(o):o;const l=`${e.substring(0,e.indexOf("/")+1)+Pt}/${Dt(e)}`,n=l.length<80?l:e.substring(0,80)+Pt;return t?jt(n):n}function Lt(e){return e.replace(/^\/+/g,"").replace(/\/+$/g,"")}const Tt={id:"AddFolderModal",tabindex:"-1"},$t={class:"modal-dialog"},Bt={class:"modal-content"},Rt={class:"modal-header"},Ut=s("h4",{class:"modal-title"},"S3 Explorer: Create New Folder",-1),Ft={class:"modal-body"},_t={class:"col-md-18"},Mt={class:"panel panel-default"},Nt={class:"panel-body"},zt=s("p",null,"Please enter the relative path of the S3 folder to add to the current directory of the selected bucket, for example folder01 or Lorem/Ipsum/Bacon.",-1),Wt=p("Current Bucket: "),Kt=s("br",null,null,-1),Vt=s("br",null,null,-1),qt={class:"input-group bottom-marg-10"},Ht={class:"input-group-addon"},Gt={class:"modal-footer"},Yt={class:"form-group"},Jt={class:"col-sm-offset-2 col-sm-10"},Qt=["disabled"],Zt=[s("i",{class:"fa fa-folder-plus fa-lg"},null,-1),p(" Add Folder")],Xt={setup(t){const o=e({newFolderName:null});return(e,t)=>(n(),a("div",Tt,[s("div",$t,[s("div",Bt,[s("form",{onSubmit:t[3]||(t[3]=i((e=>{(async()=>{R.log("Adding new directory");const e=Lt(o.newFolderName.trim()),t=Lt(`${F.currentDirectory||""}${F.delimiter}${e}`);if(R.log("Calculated directory:",t),F.objects.find((e=>e.key===t&&"DIRECTORY"===e.type)))return R.log(`Error: folder or object already exists at: ${t}`),void(F.showAddFolder=!1);const l=new AWS.S3(AWS.config),n={Bucket:F.currentBucket.trim().toLowerCase(),Key:`${t}${F.delimiter}`};try{return await l.headObject(n).promise(),R.log("Directory already exists, skipping creation"),void(F.showAddFolder=!1)}catch(s){if(!s)return void R.log(`Error: directory or object already exists at: ${t}`);if(s&&"NotFound"!==s.code)return void R.log(`Error checking existence of folder: ${s}`);try{await l.putObject(n).promise()}catch(i){return void R.log(`Error creating folder: ${i}`)}}const a=e.split(F.delimiter)[0];F.objects.find((e=>e.key===a&&"DIRECTORY"===e.type))||F.objects.push({key:t,type:"DIRECTORY"}),F.showAddFolder=!1})()}),["prevent"]))},[s("div",null,[s("div",Rt,[s("button",{type:"button",class:"close",onClick:t[0]||(t[0]=e=>d(F).showAddFolder=!1),"aria-hidden":"true"},"×"),Ut]),s("div",Ft,[s("div",_t,[s("div",Mt,[s("div",Nt,[zt,s("span",null,[Wt,s("strong",null,w(d(F).currentBucket),1)]),Kt,Vt,s("div",qt,[s("span",Ht,w(d(F).currentDirectory||"(root)"),1),r(s("input",{name:"folder","onUpdate:modelValue":t[1]||(t[1]=e=>d(o).newFolderName=e),type:"text",class:"form-control",placeholder:"folder",required:"true"},null,512),[[c,d(o).newFolderName,void 0,{trim:!0}]])])])])])]),s("div",Gt,[s("div",Yt,[s("div",Jt,[s("button",{type:"button",class:"btn btn-default",onClick:t[2]||(t[2]=e=>d(F).showAddFolder=!1)},"Cancel"),s("button",{type:"submit",disabled:!d(o).newFolderName,class:"btn btn-primary"},Zt,8,Qt)])])])])],32)])])]))}},eo={id:"TrashModal",tabindex:"-1"},to={class:"modal-dialog modal-xl"},oo={class:"modal-content"},lo={class:"modal-header"},no={class:"modal-title"},ao={class:"modal-body"},so={class:"col-md-18"},io={class:"panel-body"},ro=p(" Please confirm that you want to delete the following objects from S3. "),co=s("br",null,null,-1),uo=p("Current Bucket: "),po=s("br",null,null,-1),go=s("br",null,null,-1),yo={class:"table table-bordered table-hover table-striped",id:"trash-table"},fo=s("thead",{id:"trash-thead"},[s("tr",null,[s("th"),s("th",null,"Object"),s("th",null,"Last Modified"),s("th",null,"Class"),s("th",null,"Size"),s("th",null,"Result")])],-1),ho={id:"trash-tbody"},mo={key:0,class:"fas fa-folder",style:{"margin-right":"1rem"}},bo={key:0,class:"trasherror"},wo={key:1,class:"trashdeleted"},vo={key:2,class:"trasherror"},ko={key:3},So={class:"modal-footer"},Co={class:"form-group"},xo={class:"col-sm-offset-2 col-sm-10"},Io=["disabled"],Ao=s("i",{class:"fa fa-trash-alt fa-lg"},null,-1),Eo={props:{selectedKeys:Array},emits:["trashCompleted"],setup(t,{emit:l}){const i=t,r=e({title:null,trashing:!1,objectStatus:{}});b((()=>{F.deletedObjects={}}));const c=o((()=>{var e;const t=null==(e=i.selectedKeys)?void 0:e.reduce(((e,t)=>(e[t]=!0,e)),{});return F.objects.filter((e=>t[e.key])).sort(((e,t)=>e.type===t.type?e.key.localeCompare(t.key):"DIRECTORY"===e.type?-1:1))})),u=o((()=>c.length?`Delete (${c.length})`:"Delete")),g=o((()=>!Object.keys(r.objectStatus).length||!!Object.values(r.objectStatus).find((e=>!e||"DELETED"!==e)))),y=()=>{F.objects=F.objects.filter((e=>!F.deletedObjects[e.key])),l("trashCompleted"),F.showTrash=!1},f=async(e,t,o)=>{R.log("Delete file count:",e.length),r.trashing=!0;const l=new AWS.S3({region:F.region}),n=t.reduce(((e,t)=>(e[t.key]=t,e)),{});await Promise.all(e.map((async e=>{if("DELETED"!==r.objectStatus[e]){R.log("Deleting key:",e);try{if("DIRECTORY"!==n[e].type)await l.deleteObject({Bucket:F.currentBucket.trim().toLowerCase(),Key:e}).promise();else{const t=await Ge(e);R.log("Queuing deletes for:",e,t),await f(t.map((e=>e.key)),t,!0)}R.log("DELETED:",e),o||(r.objectStatus[e]="DELETED",F.deletedObjects[e]=!0)}catch(t){if(R.log(`Failed to delete: ${e} - ${t}`),o)throw t;"AccessDenied"===t.code?r.objectStatus[e]="DENIED":r.objectStatus[e]=`Failed: ${t.code}`}}}))),r.trashing=!1};return(e,t)=>(n(),a("div",eo,[s("div",to,[s("div",oo,[s("div",lo,[s("button",{type:"button",class:"close",onClick:y},"×"),s("h4",no,"S3 Explorer: Delete "+w(d(r).count)+" objects",1)]),s("div",ao,[s("div",so,[s("div",io,[s("p",null,[ro,co,s("span",null,[uo,s("strong",null,w(d(F).currentBucket),1)]),po,go]),s("table",yo,[fo,s("tbody",ho,[(n(!0),a(x,null,I(d(c),((e,t)=>(n(),a("tr",{key:e.key},[s("td",null,w(t+1),1),s("td",null,["DIRECTORY"===e.type?(n(),a("i",mo)):C("",!0),p(w(e.key),1)]),s("td",null,w(e.lastModified),1),s("td",null,w(e.storageClass),1),s("td",null,w(d(Et)(e.size)),1),s("td",null,["DENIED"===d(r).objectStatus[e.key]?(n(),a("span",bo,"Access Denied")):"DELETED"===d(r).objectStatus[e.key]?(n(),a("span",wo,"Deleted")):d(r).objectStatus[e.key]?(n(),a("span",vo,w(d(r).objectStatus[e.key]),1)):(n(),a("i",ko))])])))),128))])])])])]),s("div",So,[s("div",Co,[s("div",xo,[s("button",{type:"button",class:"btn btn-default",onClick:y},w(d(g)?"Cancel":"Close"),1),d(r).trashing||d(g)?(n(),a("button",{key:0,type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=e=>f(i.selectedKeys,d(F).objects)),disabled:d(r).trashing},[Ao,p(" "+w(d(u)),1)],8,Io)):C("",!0)])])])])])]))}};h("data-v-2873afda");const jo={id:"UploadModal",tabindex:"-1"},Do={class:"modal-dialog modal-xl"},Po={class:"modal-content"},Oo={class:"modal-header"},Lo={class:"modal-title"},To=p("Upload to: "),$o={class:"modal-body"},Bo={class:"col-md-18"},Ro={class:"panel-body"},Uo=s("p",null," Please confirm that you want to upload the following files to S3: ",-1),Fo={class:"table table-bordered table-hover table-striped",id:"upload-table"},_o=s("thead",{id:"upload-thead"},[s("tr",null,[s("th"),s("th",null,"Filename"),s("th",null,"Type"),s("th",null,"Size"),s("th",null,"Progress")])],-1),Mo={id:"upload-tbody"},No={key:0},zo={key:1,class:"progress"},Wo={key:2},Ko=[s("span",{class:"progress-bar-danger"},"Access Denied",-1)],Vo={key:3},qo=[s("span",{class:"progress-bar-danger"},null,-1)],Ho={key:4},Go={class:"uploadError"},Yo=p(" The selected files will be uploaded to:"),Jo=s("br",null,null,-1),Qo={key:0,class:"panel panel-success",style:{cursor:"pointer"}},Zo=[E('<div class="panel-heading" style="display:flex;direction:row;align-items:center;justify-content:space-between;" data-v-2873afda><div style="display:flex;direction:row;align-items:center;" data-v-2873afda><div class="title " data-v-2873afda>Dropzone</div></div></div><div class="panel-body" style="overflow:auto;text-align:center;" data-v-2873afda> Drag and drop files and folders you want to upload here. <br data-v-2873afda><br data-v-2873afda><div class="text-muted" data-v-2873afda><strong data-v-2873afda>No files or folders</strong><br data-v-2873afda> You have not chosen any files or folders to upload. </div></div>',2)],Xo={class:"modal-footer"},el={class:"form-group"},tl={class:"col-sm-offset-2 col-sm-10"},ol=["disabled"],ll=s("i",{class:"fa fa-cloud-upload-alt fa-lg"},null,-1);m();const nl={props:{filesToUpload:Array},emits:["uploadsCompleted"],setup(t,{emit:l}){const i=t,r=e({uploadStarted:!1,completionPercentageMap:{}});let c={};const u=o((()=>r.uploadStarted&&Object.values(r.completionPercentageMap).every((e=>100===e)))),g=o((()=>r.uploadStarted?u?"FINISHED":"IN_PROGRESS":"WAITING_FOR_APPROVAL")),y=o((()=>{var e,t;return{WAITING_FOR_APPROVAL:1===(null==(e=i.filesToUpload)?void 0:e.length)?"Upload 1 file":`Upload ${null==(t=i.filesToUpload)?void 0:t.length} files`,IN_PROGRESS:"Cancel remaining uploads"}[g.value]})),f=()=>{r.uploadStarted?Object.keys(c).forEach((e=>{"number"==typeof r.completionPercentageMap[e]&&r.completionPercentageMap[e]<100&&c[e].abort()})):m()},h=()=>{l("uploadsCompleted"),F.showUploads=!1},m=()=>{c={},r.uploadStarted=!0,i.filesToUpload.forEach(((e,t)=>{R.log("Uploading file:",e);const o=new AWS.S3({region:F.region}),l={Bucket:F.currentBucket.trim().toLowerCase(),Key:(F.currentDirectory&&`${F.currentDirectory}${F.delimiter}`||"")+(e.fullPath||e.name),ContentType:e.type,Body:e},n=o.upload(l);c[t]=n,r.completionPercentageMap[t]=0;n.on("httpUploadProgress",(o=>{R.log("File:",e,"Part:",o.part,o.loaded,"of",o.total),r.completionPercentageMap[t]=Number(o.total)&&Math.round(Number(o.loaded)/Number(o.total)*100)||0})).send((o=>{o?"AccessDenied"===o.code?(R.log("Access Denied for upload:",e),r.completionPercentageMap[t]="DENIED"):"RequestAbortedError"===o.code?(R.log("Abort upload:",e),r.completionPercentageMap[t]="CANCELLED"):(R.log(JSON.stringify(o)),r.completionPercentageMap[t]=`FAILED: ${o.code}`):(R.log("Uploaded",e.name),r.completionPercentageMap[t]=100)}))}))};return(e,t)=>(n(),a("div",jo,[s("div",Do,[s("div",Po,[s("div",Oo,[s("button",{type:"button",class:"close","aria-hidden":"true",onClick:h},"×"),s("h4",Lo,[To,s("strong",null,w(d(F).currentDirectory),1)])]),s("div",$o,[s("div",Bo,[s("div",Ro,[Uo,s("table",Fo,[_o,s("tbody",Mo,[(n(!0),a(x,null,I(i.filesToUpload,((e,t)=>(n(),a("tr",{key:d(Ot)(e.fullPath||e.name)},[s("td",null,w(t+1),1),s("td",null,w(d(Ot)(e.fullPath||e.name)),1),s("td",null,w(e.type),1),s("td",null,w(d(Et)(e.size)),1),s("td",null,[d(r).uploadStarted?"number"==typeof d(r).completionPercentageMap[t]?(n(),a("div",zo,[s("span",{class:"progress-bar",style:A({width:`${d(r).completionPercentageMap[t]}%`})},w(d(r).completionPercentageMap[t])+"%",5)])):"DENIED"===d(r).completionPercentageMap[t]?(n(),a("div",Wo,Ko)):"CANCELLED"===d(r).completionPercentageMap[t]?(n(),a("div",Vo,qo)):d(r).completionPercentageMap[t]?(n(),a("div",Ho,[s("span",Go,w(d(r).completionPercentageMap[t]),1)])):C("",!0):(n(),a("div",No))])])))),128))])]),s("p",null,[Yo,Jo,s("strong",null,w(d(F).currentBucket)+" > "+w(d(F).currentDirectory||d(F).delimiter),1)])]),d(r).uploadStarted?C("",!0):(n(),a("div",Qo,Zo))])]),s("div",Xo,[s("div",el,[s("div",tl,[s("button",{disabled:"IN_PROGRESS"===d(r).status,type:"button",class:"btn btn-default",onClick:h},"Close",8,ol),d(y)?(n(),a("button",{key:0,type:"button",class:"btn btn-primary",onClick:f},[ll,p(" "+w(d(y)),1)])):C("",!0)])])])])])]))},__scopeId:"data-v-2873afda"};h("data-v-0a80d632");const al={class:"fixed-in-bottom-corner"},sl=[s("div",{class:"badge d-flex align-items-center justify-content-center"},[s("div",{class:"d-flex align-items-center justify-content-center"},[s("span",{class:"mr-3 d-none d-sm-block"},[s("i",{class:"fas fa-shield-alt",style:{color:"gold"}}),p(" Protected By Authress")])])],-1)];m();const il={setup(e){const t=()=>{window.open("https://authress.io","_blank")};return(e,o)=>(n(),a("div",al,[s("div",{class:"contact-us pointer",onClick:t},sl)]))},__scopeId:"data-v-0a80d632"};h("data-v-8b683ab2");const rl={id:"dropzone",style:{"min-height":"100%"}},cl=[s("div",{class:"dropzoneOverlayText"},[s("div",{class:"text"},[s("h2",{class:"title"},"Dropzone"),s("h3",null,"Drag and drop files and folders you want to upload here.")])],-1)],dl=s("div",{id:"hiddenDropZoneList",style:{display:"none"}},null,-1);m();const ul={emits:["enter","leave","fileAdded"],setup(t,{emit:o}){const l=j(null),i=e({enterFunction:null,leaveFunction:null,dragster:null,overlayActive:!1});return b((()=>{i.dragster=new Dragster(l.value),i.enterFunction=e=>{i.overlayActive=!0,o("enter",e)},i.leaveFunction=e=>{i.overlayActive=!1,o("leave",e)},l.value.addEventListener("dragster:enter",i.enterFunction),l.value.addEventListener("dragster:leave",i.leaveFunction),D.autoDiscover=!1;new D("#dropzone",{autoQueue:!1,url:"IGNORED",previewsContainer:"#hiddenDropZoneList"}).on("addedfile",(e=>{console.log("File added",e.name,e.fullPath,e.size),o("fileAdded",e),i.overlayActive=!1,i.dragster.reset()}))})),P((()=>{})),(e,t)=>(n(),a("form",rl,[s("div",{class:"dropzoneWrapper",ref:l},[s("div",{id:"overlay",class:u({displayOverlay:d(i).overlayActive})},cl,2),O(e.$slots,"default",{},void 0,!0)],512),dl]))},__scopeId:"data-v-8b683ab2"};h("data-v-bc416a00");const pl={class:"centered"},gl=[s("i",{class:"spinner fas fa-spinner fa-5x fa-spin"},null,-1),p("   ")];m();const yl={setup:e=>(e,t)=>(n(),a("div",pl,gl)),__scopeId:"data-v-bc416a00"};h("data-v-5b525dac");const fl={class:"col-12",style:{display:"flex","flex-direction":"column","flex-wrap":"nowrap"}},hl={class:"panel panel-primary",style:{"flex-grow":"1"}},ml={class:"panel-heading",style:{display:"flex",direction:"row","align-items":"center","justify-content":"space-between"}},bl={style:{display:"flex",direction:"row","align-items":"center"}},wl=s("div",{class:"title d-flex",style:{"align-items":"center"}},[s("h4",null,"AWS S3 Explorer")],-1),vl={key:0,class:"",style:{"margin-right":"0.5rem"}},kl={key:1},Sl={key:2},Cl={key:0,class:"btn-group"},xl={id:"badgecount",style:{cursor:"default"},class:"btn badge ",title:"Object count"},Il={key:1,class:"btn-group"},Al={id:"badgecount",style:{cursor:"default"},class:"btn badge ",title:"Selected object count"},El={id:"navbuttons"},jl={class:"btn-group d-flex"},Dl={key:0},Pl=[s("img",{src:"./assets/github-logo.df940d40.svg",height:"28"},null,-1)],Ol={key:0},Ll={key:1,class:"panel-body",style:{overflow:"auto"}},Tl={style:{display:"flex","align-items":"center","justify-content":"space-between"}},$l=p(" /  "),Bl=["href","onClick"],Rl=p(" /  "),Ul={style:{"flex-shrink":"0","flex-grow":"1",display:"flex","flex-direction":"row","flex-wrap":"no-wrap","justify-content":"flex-end"}},Fl=["disabled"],_l=[s("i",{class:"fa fa-cloud-download-alt",style:{"margin-right":"0.5rem"}},null,-1),p("Download ")],Ml=[s("i",{class:"fa fa-folder-plus",style:{"margin-right":"0.5rem"}},null,-1),p("New Folder ")],Nl=["disabled"],zl=[s("i",{class:"fa fa-trash-alt",style:{"margin-right":"0.5rem"}},null,-1),p("Delete Objects ")],Wl={class:"d-flex justify-content-end",style:{"padding-top":"1rem"}},Kl=s("br",null,null,-1),Vl={key:1,class:"table table-bordered table-hover table-striped",style:{width:"100%"},id:"s3objects-table"},ql=s("th",null,"Object",-1),Hl=s("th",null,"Last Modified",-1),Gl=s("th",null,"Class",-1),Yl=s("th",null,"Size",-1),Jl=["onClick"],Ql=["onUpdate:modelValue"],Zl=s("i",{class:"fas fa-folder",style:{"margin-right":"1rem"}},null,-1),Xl=["href","onClick"],en=s("td",{style:{"text-align":"center"}},null,-1),tn=s("td",{style:{"text-align":"center"}},null,-1),on=s("td",{style:{"text-align":"center"}},null,-1),ln=["onClick"],nn=["onUpdate:modelValue"],an={style:{"text-align":"center"}},sn={style:{"text-align":"center"}},rn={style:{"text-align":"center"}},cn=[s("div",{class:"panel-heading",style:{display:"flex",direction:"row","align-items":"center","justify-content":"space-between"}},[s("div",{style:{display:"flex",direction:"row","align-items":"center"}},[s("div",{class:"title "},"Dropzone")])],-1),s("div",{class:"panel-body",style:{overflow:"auto","text-align":"center"}},[p(" Drag and drop files and folders you want to upload here. "),s("br"),s("br"),s("div",{class:"text-muted"},[s("strong",null,"No files or folders"),s("br"),p(" You have not chosen any files or folders to upload. ")])],-1)],dn={key:1,class:"col-12"};m();const un={setup(i){const p=e({objectCount:0,selectedKeys:{},filesToUpload:[],globalSelect:!1,filterText:""}),g=async()=>{const e=new Promise((e=>setTimeout(e,1e3)));try{p.loading=!0,await He()}catch(t){F.showBucketSelector=!0}await e,p.loading=!1},h=()=>{F.showBucketSelector=!0};b((async()=>{var e;return F.loggedOut?(F.showSettings=!0,void(F.globalLoader=!1)):F.initialized?void(F.globalLoader=!1):(await K(),await async function(){if("localhost"!==window.location.hostname&&"console.rhosys.ch"!==window.location.hostname)try{const e=await fetch(new URL("/configuration/shared.json",window.location.href).toString()),t=await e.json();F.sharedSettings=t,R.log("Updating shared configuration from custom domain.")}catch(e){R.log("Failed to fetch shared configuration for custom domain: ",e)}}(),F.globalLoader=!1,F.tokens?F.currentBucket?void(await g()):M().length?void(F.currentBucket=null==(e=M()[0].bucket)?void 0:e.trim().toLowerCase()):(F.showBucketSelector=!0,void(F.objects=[])):(F.showSettings=!0,void(F.objects=[])))}));const m=e=>{p.filesToUpload.push(e),F.showUploads=!0},S=()=>{p.filesToUpload=[],p.selectedKeys={},He()},E=async e=>{p.selectedKeys={},p.globalSelect=!1,F.currentDirectory=e,await He()},j=async()=>{await async function(e,t){const o=new AWS.S3({maxRetries:0,region:M().find((t=>t.bucket===e)).region||F.region}),n=[],a=async t=>{if(t.slice(-1)[0]===F.delimiter)return;const l={Bucket:e,Key:t,RequestPayer:"requester"},a=await o.getObject(l).promise(),s=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(a.ContentDisposition),i=s&&s[1].replace(/['"]/g,"")||t.split(F.delimiter).slice(-1)[0];n.push({blob:new Blob([a.Body]),filename:i,filepath:t,lastModified:a.LastModified})};if(await Promise.all(t.map((async e=>{"DIRECTORY"!==F.objects.find((t=>t.key===e)).type&&await a(e);const t=(await Ge(e,!0)).map((e=>e.key));await Promise.all(t.map((e=>a(e))))}))),1===n.length)return void y.exports.saveAs(n[0].blob,n[0].filename);const s=new f;n.forEach((e=>{s.file(e.filepath,e.blob,{date:e.lastModified,createFolders:!0})}));const i=await s.generateAsync({type:"blob"});y.exports.saveAs(i,`${e}-${l.local().toISODate()}.zip`)}(F.currentBucket,Object.keys(p.selectedKeys))},D=o((()=>F.objects.filter((e=>!p.filterText||e.key.includes(p.filterText))).sort(((e,t)=>e.key.localeCompare(t.key))))),P=o((()=>Object.keys(p.selectedKeys).filter((e=>!F.deletedObjects[e]&&p.selectedKeys[e])).length)),O=o((()=>F.currentDirectory===F.delimiter?[F.currentDirectory]:F.currentDirectory&&F.currentDirectory.split(F.delimiter)||[]));t(D,(async(e,t)=>{F.currentDirectory&&t.length&&!e.length&&await E(F.currentDirectory.split(F.delimiter).slice(0,-1).join(F.delimiter))}));const $=o((()=>p.globalSelect));return t($,(e=>{D.value.forEach((t=>{p.selectedKeys[t.key]=e}))})),(e,t)=>(n(),L(ul,{onFileAdded:m},{default:k((()=>[s("div",fl,[s("div",hl,[s("div",ml,[s("div",bl,[wl,d(F).tokens&&d(F).currentBucket?(n(),a("div",vl,[s("button",{type:"button",class:"btn btn-default",onClick:h},w(d(F).currentBucket),1)])):d(F).tokens?(n(),a("div",kl,[s("button",{type:"button",class:"btn btn-default",onClick:h},"Select Bucket")])):C("",!0),d(F).tokens&&d(F).currentBucket?(n(),a("div",Sl,[0===d(P)?(n(),a("div",Cl,[s("span",xl,w(d(F).objects.length)+" "+w(1!==d(F).objects.length?"objects":"object"),1)])):C("",!0),d(P)>0?(n(),a("div",Il,[s("span",Al,w(d(P))+" of "+w(d(F).objects.length)+" selected",1)])):C("",!0)])):C("",!0)]),s("div",El,[s("div",jl,[d(F).currentBucket&&d(F).tokens?(n(),a("div",Dl,[s("span",{style:{cursor:"pointer"},class:u(["btn fa fa-sync fa-2x",{"fa-spin":d(p).loading}]),onClick:t[0]||(t[0]=e=>g()),title:"Reload the directory"},null,2)])):C("",!0),s("span",{style:{cursor:"pointer"},class:"btn fa fa-sign-out-alt fa-2x",onClick:t[1]||(t[1]=e=>(()=>{if(R.log("Logging out"),F.objects=[],F.loggedOut=!0,F.autoLoginIn=!1,F.showBucketSelector=!1,F.tokens){F.tokens=null;const e=`${window.location.origin}${window.location.pathname}`;window.location=F.applicationLoginUrl?`${F.applicationLoginUrl}/logout?client_id=${F.applicationClientId}&logout_uri=${e}`:window.location.origin}else F.showSettings=!0})()),title:"Logout"}),s("span",{style:{cursor:"pointer"},class:"btn fa",onClick:t[2]||(t[2]=e=>{window.open("https://github.com/Rhosys/aws-s3-explorer#aws-s3-explorer","_blank")}),title:"Check out the source at Github.com"},Pl)])])]),d(F).globalLoader?(n(),a("div",Ol,[v(yl)])):(n(),a("div",Ll,[d(F).tokens&&d(F).currentBucket?(n(),a(x,{key:0},[s("div",Tl,[s("div",null,[s("span",null,[s("a",{href:"#",onClick:t[3]||(t[3]=e=>E(null))},w(d(F).currentBucket),1)]),$l,(n(!0),a(x,null,I(d(O),((e,t)=>(n(),a("span",{key:e},[s("a",{style:A({"text-decoration":t+1===d(O).length?"none":void 0,color:t+1===d(O).length?"unset":void 0,cursor:t+1===d(O).length?"unset":"pointer"}),href:`#path=${d(O).slice(0,t+1).join(d(F).delimiter)}`,onClick:e=>E(d(O).slice(0,t+1).join(d(F).delimiter))},w(e.length>30?`${e.slice(0,30)}…`:e),13,Bl),Rl])))),128))]),s("div",Ul,[s("button",{type:"button",style:{cursor:"pointer","margin-left":"0.5rem"},class:"text-primary btn btn-xs btn-warning",disabled:!d(P),onClick:j,title:"Download files"},_l,8,Fl),s("button",{type:"button",style:{cursor:"pointer","margin-left":"0.5rem"},class:"text-primary btn btn-xs btn-primary",onClick:t[4]||(t[4]=e=>d(F).showAddFolder=!0),title:"New folder"},Ml),s("button",{type:"button",style:{cursor:"pointer","margin-left":"0.5rem"},class:"text-primary btn btn-xs btn-danger",disabled:!d(P),onClick:t[5]||(t[5]=e=>d(F).showTrash=!0),title:"Delete Objects"},zl,8,Nl)])]),s("div",Wl,[r(s("input",{class:"filter-results",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>d(p).filterText=e),placeholder:"Filter results..."},null,512),[[c,d(p).filterText]])])],64)):C("",!0),Kl,d(F).tokens?(n(),a("table",Vl,[s("thead",null,[s("tr",null,[s("th",{class:"text-center",style:{"text-align":"center",cursor:"pointer"},onClick:t[8]||(t[8]=e=>d(p).globalSelect=!d(p).globalSelect)},[r(s("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>d(p).globalSelect=e)},null,512),[[T,d(p).globalSelect]])]),ql,Hl,Gl,Yl])]),s("tbody",null,[(n(!0),a(x,null,I(d(D).filter((e=>"DIRECTORY"===e.type)),(e=>(n(),a("tr",{key:e.key},[s("td",{style:{"text-align":"center",cursor:"pointer"},onClick:()=>d(p).selectedKeys[e.key]=!d(p).selectedKeys[e.key]},[r(s("input",{type:"checkbox","onUpdate:modelValue":t=>d(p).selectedKeys[e.key]=t},null,8,Ql),[[T,d(p).selectedKeys[e.key]]])],8,Jl),s("td",null,[Zl,s("a",{href:`#path=${e.key}`,onClick:t=>E(e.key)},w(e.key.split(d(F).delimiter).slice(-1)[0]||d(F).delimiter),9,Xl)]),en,tn,on])))),128)),(n(!0),a(x,null,I(d(D).filter((e=>"PATH"===e.type&&e.key.split(d(F).delimiter).slice(-1)[0])),(e=>(n(),a("tr",{key:e.key},[s("td",{style:{"text-align":"center",cursor:"pointer"},onClick:()=>d(p).selectedKeys[e.key]=!d(p).selectedKeys[e.key]},[r(s("input",{type:"checkbox","onUpdate:modelValue":t=>d(p).selectedKeys[e.key]=t},null,8,nn),[[T,d(p).selectedKeys[e.key]]])],8,ln),s("td",null,w(e.key.split(d(F).delimiter).slice(-1)[0]),1),s("td",an,w(e.lastModified),1),s("td",sn,w(e.storageClass),1),s("td",rn,w(d(Et)(e.size)),1)])))),128))])])):C("",!0)]))])]),d(F).awsAccountId&&d(F).tokens&&d(F).currentBucket?(n(),a("div",{key:0,class:"panel panel-success",onClick:t[9]||(t[9]=e=>d(F).showUploads=!0),style:{cursor:"pointer"}},cn)):C("",!0),d(F).globalLoader?C("",!0):(n(),a("div",dn,[d(F).showSettings?(n(),L(Ve,{key:0})):C("",!0),d(F).showBucketSelector?(n(),L(At,{key:1})):C("",!0),d(F).showAddFolder?(n(),L(Xt,{key:2})):C("",!0),d(F).showTrash?(n(),L(Eo,{key:3,selectedKeys:Object.keys(d(p).selectedKeys).filter((e=>d(p).selectedKeys[e])),onTrashCompleted:S},null,8,["selectedKeys"])):C("",!0),d(F).showUploads?(n(),L(nl,{key:4,filesToUpload:d(p).filesToUpload,onUploadsCompleted:S},null,8,["filesToUpload"])):C("",!0)])),v(il)])),_:1}))},__scopeId:"data-v-5b525dac"};const pn=$({setup:e=>(e,t)=>(n(),L(un))});pn.use(B,{autoSetContainer:!0,appendToBody:!0}),AWS.config.update({region:""}),AWS.config.update({signatureVersion:"v4"}),pn.mount("#app");
